{erl_opts, [debug_info]}.

{deps,
 [
  {stringprep, "1.0.25"}
 ]}.

{dialyzer,
 [{warnings,
   [race_conditions,
    unknown,
    unmatched_returns,
    error_handling,
    underspecs
]}]}.


{project_plugins, [
    pc,
    rebar3_hex,
    rebar3_ex_doc
]}.

{artifacts, ["priv/jid.so"]}.

{port_specs,
 [
    {
        % Any arch
        ".*",
        % Create library
        "priv/jid.so",
        % From files
        ["c_src/*.c"],
        [{env, [{"CFLAGS", "$CFLAGS -std=c99 -O3 -Wall -Wextra -fPIC"}]}]
     }
 ]}.

{provider_hooks,
 [
    {post,
     [
        {compile, {pc, compile}},
        {clean, {pc, clean}}
     ]}
 ]}.

{profiles,
 [
    {test,
     [
        {deps, [{proper, "1.3.0"}]},
        {plugins,
         [
            pc,
            coveralls,
            {rebar3_codecov, "0.2.0"}
         ]}
     ]}
 ]}.

{cover_enabled, true}.
{cover_export_enabled, true}.

{hex, [
    {doc, #{provider => ex_doc}}
]}.
{ex_doc, [
     {extras, [<<"README.md">>, <<"LICENSE">>]},
     {main, <<"readme">>},
     {source_url, <<"https://github.com/esl/mongoose_jid">>}
]}.
